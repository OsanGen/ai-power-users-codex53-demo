Render Component

Purpose:
- Draw all visuals each frame from `AIPU.state`, including environment, entities, HUD, state overlays, and visual theme layers.
- Apply the arena floor visual themes and transition overlays while keeping gameplay state and rules unchanged.

Inputs:
- Render state (`AIPU.state.game`, `AIPU.state.player`, entity collections).
- Constants and helpers from `AIPU.constants` and `AIPU.utils`.
- Narrative content helpers from `AIPU.content` for all overlay labels.
- Optional systems callbacks from `AIPU.systems` for collections and state transitions.

Outputs:
- A single frame on `canvas`.
- Overlay content for title, upgrade cards, bomb briefing, lesson/death lesson, floor intro/clear, and run summary.
- Background and world layers with per-floor visual theme data.

State/Edges:
- Uses `ctx.textAlign`/`textBaseline` state carefully and resets at block exits.
- Uses `withRectClip` for lesson/death text clipping and `withClipRect` for rounded-panel masking.
- Keeps overlay text readable by top-aligned clipping paths with insets.
- Supports reduced-motion by removing motion terms.
- No gameplay mechanics are changed in render path.
- `hasDynamicFloorVisuals` now safely accepts numeric or numeric-string floor IDs before enabling dynamic layer effects.

Dependencies:
- `AIPU.content` narrative helper methods for labels.
- `AIPU.systems` collections and state helpers.
- `AIPU.utils` for color/geometry/font helpers.

Acceptance Checks:
- No state transitions altered by rendering.
- Lesson/death overlays remain legible with stable baseline/clipping.
- Floor themes resolve consistently by floor id.
