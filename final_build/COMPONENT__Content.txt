Content Component

Purpose:
- Centralize all narrative and UI fallback copy used by title, floor overlays, lesson cards, death lessons, HUD labels, and share text.
- Gate gameplay-facing copy through `pickNarrativeText`, defaulting safely when narrative is unavailable.
- Provide content helpers for upgrades, floor wave definitions, enemy lore, and narrative-aware overlays.
- Add late-game pressure layers via extended `ENEMY_DEFS` entries on floors 12–13.

Inputs:
- `window.AI_POWER_USER_NARRATIVE` (optional) as the canonical copy source.
- Runtime state in `AIPU.state` and `AIPU.upgrades` for dynamic copy composition.
- Upgrade and narrative helpers from callers in `systems.js` and `render.js`.

Outputs:
- Helper APIs on `AIPU.content`:
  - `getNarrativeTeachCard(floorId)`
  - `getDeathLessonCard(floorId, seed)`
  - `getNarrativeTitleCard()`
  - `getNarrativeFloorCopy(floor)`
  - `getNarrativeOutcomeCopy(isVictory)`
  - `getNarrativeUiText(key, fallback)`
  - `getBombBriefingCopy(mode)`
  - `getWhatYouLearnedBullets()`
  - Content constants (`FLOORS`, `TITLE_SEQUENCE`, `ENEMY_DEFS`, etc.)

State/Edges:
- Fallbacks are narrative-aligned and safe when `N` is missing.
- Lesson text editing values are normalized before storage and truncated to `LESSON_TEXT_MAX_CHARS`.
- Floor signatures and threat lore are exposed without mutating gameplay constants.
- `getWhatYouLearnedBullets()` deduplicates upgrade-derived lesson concepts and pads with generic fallback lines.
- Floors 10–13 now scale with increasing overlap and introduce two new archetypes (`drift_hound`, `arc_turret`) from floor 12 onward.
- Difficulty progression for floors 10–13 is content-tuned so a simple spawn/speed-weighted pressure metric increases each floor with the late-floor archetype waves.

Dependencies:
- `AIPU.utils.clamp`
- `AIPU.state` for upgrade history.
- Narrative object in `window.AI_POWER_USER_NARRATIVE`.

Acceptance Checks:
- Nonexistent narrative fields never crash UI (fallbacks always return strings/arrays).
- Floor, lesson, and death overlays receive consistent narrative data even when upgrades have duplicates.
- Share/build card paths are unaffected by copy changes.
- Floor catalog includes 1..13 and new entries parse with valid wave enemy IDs.
- Teach card table includes one entry per floor for 1..13 and supports fallbacks for missing visuals.
- New enemy archetypes are safe: `drift_hound` uses existing `phase` movement and `arc_turret` uses existing `ranged` behavior.
- Floor 10–13 metrics are kept constrained by wave duration and tuned for staircase pressure from 10→13.
